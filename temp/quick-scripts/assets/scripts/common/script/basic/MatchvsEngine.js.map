{"version":3,"sources":["MatchvsEngine.js"],"names":["MatchvsEngine","console","log","prototype","init","matchVSResponses","channel","platform","gameid","responses","registerUser","_forEachResponse","res","setTimeout","userInfo","userID","token","name","avatar","registerUserResponse","login","gameVersion","appkey","secret","deviceID","gatewayid","joinRandomRoom","roomInfo","status","userInfoList","userProfile","rootID","rootProperty","owner","roomJoinResponse","func","i","length","joinOver","sendEvent","event","mockEventId","Date","getTime","sendEventRsp","seq","module","exports"],"mappings":";;;;;;AAAA,SAASA,aAAT,GAAyB;AACrBC,YAAQC,GAAR,CAAY,oBAAZ;AACH;;AAEDF,cAAcG,SAAd,CAAwBC,IAAxB,GAA+B,UAASC,gBAAT,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8CC,MAA9C,EAAqD;AAChF,SAAKC,SAAL,GAAiBJ,gBAAjB;AACA,WAAO,CAAP;AACH,CAHD;;AAKAL,cAAcG,SAAd,CAAwBO,YAAxB,GAAuC,YAAW;AAC9C,SAAKC,gBAAL,CAAsB,UAASC,GAAT,EAAc;AAChCC,mBAAW,YAAU;AACjB,gBAAIC,WAAW;AACXC,wBAAQ,KADG;AAEXC,uBAAO,mBAFI;AAGXC,sBAAM,IAHK;AAIXC,wBAAQ;AAJG,aAAf;AAMAN,gBAAIO,oBAAJ,IAA4BP,IAAIO,oBAAJ,CAAyBL,QAAzB,CAA5B;AACH,SARD,EAQG,GARH;AASH,KAVD;AAWA,WAAO,CAAP;AACH,CAbD;;AAeAd,cAAcG,SAAd,CAAwBiB,KAAxB,GAAgC,UAASL,MAAT,EAAgBC,KAAhB,EAAsBR,MAAtB,EAA6Ba,WAA7B,EAAyCC,MAAzC,EAAiDC,MAAjD,EAAwDC,QAAxD,EAAiEC,SAAjE,EAA2E;AACvG,WAAO,CAAP;AACH,CAFD;;AAIAzB,cAAcG,SAAd,CAAwBuB,cAAxB,GAAyC,YAAU;AAC/C,SAAKf,gBAAL,CAAsB,UAASC,GAAT,EAAc;AAChCC,mBAAW,YAAU;AACjB,gBAAIc,WAAW;AACXC,wBAAQ,CADG;AAEXC,8BAAc,CACV,EAACd,QAAQ,KAAT,EAAee,aAAa,IAA5B,EADU,EAEV,EAACf,QAAQ,KAAT,EAAee,aAAa,IAA5B,EAFU,EAGV,EAACf,QAAQ,KAAT,EAAee,aAAa,IAA5B,EAHU,CAFH;AAOXH,0BAAU;AACNI,4BAAQ,OADF;AAENC,kCAAc,KAFR;AAGNC,2BAAO;AAHD;AAPC,aAAf;AAaArB,mBAAOA,IAAIsB,gBAAJ,CAAqBP,QAArB,CAAP;AACH,SAfD,EAeG,GAfH;AAgBH,KAjBD;AAkBA,WAAO,CAAP;AACH,CApBD;;AAsBA3B,cAAcG,SAAd,CAAwBQ,gBAAxB,GAA2C,UAASwB,IAAT,EAAe;AACtD,QAAI,KAAK1B,SAAT,EAAoB;AAChB,aAAI,IAAI2B,IAAI,CAAZ,EAAeA,IAAE,KAAK3B,SAAL,CAAe4B,MAAhC,EAAwCD,GAAxC,EAA6C;AACzC,iBAAK3B,SAAL,CAAe2B,CAAf,KAAqBD,KAAK,KAAK1B,SAAL,CAAe2B,CAAf,CAAL,CAArB;AACH;AACJ;AACJ,CAND;;AAQApC,cAAcG,SAAd,CAAwBmC,QAAxB,GAAmC,YAAU;AACzC,WAAO,CAAP;AACH,CAFD;;AAIAtC,cAAcG,SAAd,CAAwBoC,SAAxB,GAAoC,UAASC,KAAT,EAAe;AAC/C,QAAIC,cAAc,IAAIC,IAAJ,GAAWC,OAAX,EAAlB;AACA,SAAKhC,gBAAL,CAAsB,UAASC,GAAT,EAAa;AAC/BC,mBAAW,YAAU;AACjBD,gBAAIgC,YAAJ,IAAoBhC,IAAIgC,YAAJ,CAAiB,EAAC,UAAU,CAAX,EAAc,OAAOH,WAArB,EAAjB,CAApB;AACH,SAFD,EAEG,GAFH;AAGH,KAJD;AAKA,WAAO,EAACb,QAAQ,CAAT,EAAYiB,KAAKJ,WAAjB,EAAP;AACH,CARD;;AAUAK,OAAOC,OAAP,GAAiB/C,aAAjB","file":"MatchvsEngine.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\common\\script\\basic","sourcesContent":["function MatchvsEngine() {\r\n    console.log('MatchvsEngine init');\r\n}\r\n\r\nMatchvsEngine.prototype.init = function(matchVSResponses, channel, platform, gameid){\r\n    this.responses = matchVSResponses;\r\n    return 0;\r\n};\r\n\r\nMatchvsEngine.prototype.registerUser = function() {\r\n    this._forEachResponse(function(res) {\r\n        setTimeout(function(){\r\n            var userInfo = {\r\n                userID: 10086,\r\n                token: 'jkfldjalfkdjaljfs',\r\n                name: '张三',\r\n                avatar: 'http://d3819ii77zvwic.cloudfront.net/wp-content/uploads/2015/02/child-fist-pump.jpg'\r\n            };\r\n            res.registerUserResponse && res.registerUserResponse(userInfo);\r\n        }, 100);\r\n    });\r\n    return 0;\r\n};\r\n\r\nMatchvsEngine.prototype.login = function(userID,token,gameid,gameVersion,appkey, secret,deviceID,gatewayid){\r\n    return 0;\r\n};\r\n\r\nMatchvsEngine.prototype.joinRandomRoom = function(){\r\n    this._forEachResponse(function(res) {\r\n        setTimeout(function(){\r\n            var roomInfo = {\r\n                status: 0,\r\n                userInfoList: [\r\n                    {userID: 10086,userProfile: '张三'},\r\n                    {userID: 10087,userProfile: '李四'},\r\n                    {userID: 10088,userProfile: '王五'},\r\n                ],\r\n                roomInfo: {\r\n                    rootID: 1028374,\r\n                    rootProperty: \"好房间\",\r\n                    owner: 10086,\r\n                }\r\n            };\r\n            res && res.roomJoinResponse(roomInfo);\r\n        }, 100);\r\n    });\r\n    return 0;\r\n};\r\n\r\nMatchvsEngine.prototype._forEachResponse = function(func) {\r\n    if (this.responses) {\r\n        for(var i = 0; i<this.responses.length; i++) {\r\n            this.responses[i] && func(this.responses[i]);\r\n        }\r\n    }\r\n};\r\n\r\nMatchvsEngine.prototype.joinOver = function(){\r\n    return 0;\r\n};\r\n\r\nMatchvsEngine.prototype.sendEvent = function(event){\r\n    var mockEventId = new Date().getTime();\r\n    this._forEachResponse(function(res){\r\n        setTimeout(function(){\r\n            res.sendEventRsp && res.sendEventRsp({\"status\": 0, \"seq\": mockEventId});\r\n        }, 100);\r\n    });\r\n    return {status: 0, seq: mockEventId};\r\n};\r\n\r\nmodule.exports = MatchvsEngine;"]}