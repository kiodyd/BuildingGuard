{"version":3,"sources":["gameUserInfo.js"],"names":["cc","Class","extends","Component","properties","userIcon","default","type","Sprite","bg","Node","init","number","userName","userId","clientEvent","on","eventType","playerAccountGet","userInfoSet","setNum","num","setData","Game","GameManager","userInfoReq","voteEvent","GameEnv","vote","setBig","target","node","createjs","Tween","get","to","width","height","setNormal","setOut","parent","recvMsg","console","log","account","headIcon","loader","load","url","err","texture","spriteFrame","SpriteFrame","Rect","bind","onDestroy","off"],"mappings":"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","file":"gameUserInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\common\\lobby","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userIcon: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n        bg:cc.Node\r\n    },\r\n\r\n    init: function() {\r\n        this.number = '';\r\n        this.userName = '',\r\n        this.userId = 0;\r\n        clientEvent.on(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\r\n    },\r\n\r\n    setNum(num){\r\n        this.number = num;\r\n    },\r\n\r\n    setData: function(userId) {\r\n        this.userId = userId;\r\n        this.userName = userId;\r\n        Game.GameManager.userInfoReq(this.userId);\r\n    },\r\n\r\n    voteEvent(){\r\n        Game.GameEnv.vote(this);\r\n    },\r\n\r\n    setBig(){\r\n        var target = this.node;\r\n        createjs.Tween.get(target).to({ width: 150 }, 300);\r\n        createjs.Tween.get(target).to({ height: 150 }, 300);\r\n\r\n        target = this.userIcon.node;\r\n        createjs.Tween.get(target).to({ width: 150 }, 300);\r\n        createjs.Tween.get(target).to({ height: 150 }, 300);\r\n\r\n\r\n        target = this.bg;\r\n        createjs.Tween.get(target).to({ width: 150 }, 300);\r\n        createjs.Tween.get(target).to({ height: 150 }, 300);\r\n    },\r\n\r\n    setNormal(){\r\n        var target = this.node;\r\n        createjs.Tween.get(target).to({ width: 100 }, 300);\r\n        createjs.Tween.get(target).to({ height: 100 }, 300);\r\n\r\n        target = this.userIcon.node;\r\n        createjs.Tween.get(target).to({ width: 100 }, 300);\r\n        createjs.Tween.get(target).to({ height: 100 }, 300);\r\n\r\n\r\n        target = this.bg;\r\n        createjs.Tween.get(target).to({ width: 100 }, 300);\r\n        createjs.Tween.get(target).to({ height: 100 }, 300);\r\n\r\n    },\r\n\r\n    setOut(){\r\n        this.node.parent = null;\r\n    },\r\n    \r\n\r\n    userInfoSet: function(recvMsg) {\r\n        console.log(\"recvMsg:\" + recvMsg);\r\n        if (recvMsg.account == this.userId) {\r\n            console.log(\"set user info\");\r\n            console.log(recvMsg);\r\n            this.userName = recvMsg.userName;\r\n            if (recvMsg.headIcon && recvMsg.headIcon !== \"-\") {\r\n                cc.loader.load({url: recvMsg.headIcon, type: 'png'}, function(err, texture) {\r\n                    var spriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\r\n                    if(this.userIcon) {\r\n                        this.userIcon.spriteFrame = spriteFrame;\r\n                    }\r\n                }.bind(this));\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    onDestroy() {\r\n        clientEvent.off(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\r\n    },\r\n});\r\n"]}