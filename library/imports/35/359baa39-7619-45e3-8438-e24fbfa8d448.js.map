{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\common\\script\\basic\\messenger/assets\\scripts\\common\\script\\basic\\messenger\\eventListener.js"],"names":["window","eventListener","oneToMultiListener","on","eventName","handler","target","handlerList","handlers","i","length","push","dispatch","data","len","call","e","console","error","off","oldHandler","oldTarget","splice","clear","create","newEventListener","Object"],"mappings":"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","file":"eventListener.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\common\\script\\basic\\messenger","sourcesContent":["window.eventListener = {};\r\n\r\nvar oneToMultiListener = {};\r\n\r\noneToMultiListener.on = function(eventName, handler, target) {\r\n    var handlerList = this.handlers[eventName];\r\n    if (!handlerList) {\r\n        handlerList = [];\r\n        this.handlers[eventName] = handlerList;\r\n    }\r\n\r\n    for (var i = 0; i < handlerList.length; i++) {\r\n        if (!handlerList[i]) {\r\n            handlerList[i].handler = handler;\r\n            handlerList[i].target = target;\r\n            return i;\r\n        }\r\n    }\r\n\r\n    handlerList.push({handler: handler, target: target});\r\n    return handlerList.length;\r\n};\r\n\r\noneToMultiListener.dispatch = function(eventName, data) {\r\n    var handlerList = this.handlers[eventName];\r\n    if (!handlerList) {\r\n        return;\r\n    }\r\n\r\n    var len = handlerList.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var handler = handlerList[i].handler;\r\n        var target = handlerList[i].target;\r\n        if (handler) {\r\n            try {\r\n                if (target) {\r\n                    handler.call(target, data);\r\n                } else {\r\n                    handler(data);\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\noneToMultiListener.off = function(eventName, handler, target) {\r\n    var handlerList = this.handlers[eventName];\r\n    if (!handlerList) {\r\n        return;\r\n    }\r\n\r\n    for (var i = 0; i < handlerList.length; i++) {\r\n        var oldHandler = handlerList[i].handler;\r\n        var oldTarget = handlerList[i].target;\r\n        if (oldHandler === handler && oldTarget === target) {\r\n            handlerList.splice(i, 1);\r\n            break;\r\n        }\r\n    }\r\n};\r\noneToMultiListener.clear = function(target) {\r\n    for (var eventName in this.handlers) {\r\n        var handlerList = this.handlers[eventName];\r\n        for (var i = 0; i < handlerList.length; i++) {\r\n            var oldTarget = handlerList[i].target;\r\n            if (oldTarget === target) {\r\n                handlerList.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\neventListener.create = function() {\r\n    var newEventListener = Object.create(oneToMultiListener);\r\n    newEventListener.handlers = {};\r\n    return newEventListener;\r\n};"]}